{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["'use strict';\n\nimport url from 'url';\nimport app from '@architect/shared/app.js'; // eslint-disable-line import/no-unresolved\n\nasync function handler(event) {\n\tconst { host, rawPath: path, httpMethod, headers, queryStringParameters, body } = event;\n\n\tconst query = new url.URLSearchParams();\n\tfor (const k in queryStringParameters) {\n\t\tconst value = queryStringParameters[k];\n\t\tvalue.split(', ').forEach((v) => {\n\t\t\tquery.append(k, v);\n\t\t});\n\t}\n\n\tconst rendered = await app.render({\n\t\thost,\n\t\tmethod: httpMethod,\n\t\theaders,\n\t\tpath,\n\t\tbody,\n\t\tquery\n\t});\n\n\tif (rendered) {\n\t\treturn {\n\t\t\tisBase64Encoded: false,\n\t\t\tstatusCode: rendered.status,\n\t\t\theaders: rendered.headers,\n\t\t\tbody: rendered.body\n\t\t};\n\t}\n\n\treturn {\n\t\tstatusCode: 404,\n\t\tbody: 'Not Found'\n\t};\n}\n\nexport { handler };\n"],"names":["url","app"],"mappings":";;;;;;;;;;;;AAKA,eAAe,OAAO,CAAC,KAAK,EAAE;AAC9B,CAAC,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,EAAE,OAAO,EAAE,qBAAqB,EAAE,IAAI,EAAE,GAAG,KAAK,CAAC;AACzF;AACA,CAAC,MAAM,KAAK,GAAG,IAAIA,uBAAG,CAAC,eAAe,EAAE,CAAC;AACzC,CAAC,KAAK,MAAM,CAAC,IAAI,qBAAqB,EAAE;AACxC,EAAE,MAAM,KAAK,GAAG,qBAAqB,CAAC,CAAC,CAAC,CAAC;AACzC,EAAE,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK;AACnC,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AACtB,GAAG,CAAC,CAAC;AACL,EAAE;AACF;AACA,CAAC,MAAM,QAAQ,GAAG,MAAMC,uBAAG,CAAC,MAAM,CAAC;AACnC,EAAE,IAAI;AACN,EAAE,MAAM,EAAE,UAAU;AACpB,EAAE,OAAO;AACT,EAAE,IAAI;AACN,EAAE,IAAI;AACN,EAAE,KAAK;AACP,EAAE,CAAC,CAAC;AACJ;AACA,CAAC,IAAI,QAAQ,EAAE;AACf,EAAE,OAAO;AACT,GAAG,eAAe,EAAE,KAAK;AACzB,GAAG,UAAU,EAAE,QAAQ,CAAC,MAAM;AAC9B,GAAG,OAAO,EAAE,QAAQ,CAAC,OAAO;AAC5B,GAAG,IAAI,EAAE,QAAQ,CAAC,IAAI;AACtB,GAAG,CAAC;AACJ,EAAE;AACF;AACA,CAAC,OAAO;AACR,EAAE,UAAU,EAAE,GAAG;AACjB,EAAE,IAAI,EAAE,WAAW;AACnB,EAAE,CAAC;AACH;;;;"}